---
    layout: data
    permalink: /map.json
---
{
    "courses" : [{% for course in site.courses %}
            {
                "title: : "{{ course.title }}",
                "link" : "{{ course.permalink }}",
                "summary": "{{ course.summary }}"
            },
        {% endfor %}], 
    "modules" : [{% for module in site.modules %}
            {
                "title: : "{{ module.title }}",
                "summary": "{{ module.summary }}",{% for course in site.courses %}{% if course.slug == module.course %}
                "image" : "{{ course.image }}",
                "link" : "{{ course.permalink }}"
                {% endif %}{% endfor %}
            },{% endfor %}],
    "lessons" : [{% for lesson in site.lessons %}
            {
                "title: : "{{ lesson.title }}",
                "summary" : "{{ lesson.content | strip_html | strip_newlines | truncatewords: 50 | xml_escape }}",
                "link" : "{{ lesson.permalink }}",{% for course in site.courses %}{% if course.slug == lesson.course %}
                        "image" : "{{ course.image }}",{% endif %}{% endfor %}
            },{% endfor %}]
    "posts" : [{% for entry in site.posts %}
        "{{ entry.url | slugify }}": {
            "title": "{{ entry.title | xml_escape }}",
            "url": "{{ entry.url | xml_escape }}",
            "summary": "{{ entry.content | strip_html | strip_newlines | truncatewords: 50 | xml_escape }}"
        },
        {% endfor %}],
    "pages" : [{% for entry in site.html_pages %}
            {
                "title": "{{ entry.title | xml_escape }}",
                "url": "{{ entry.url | xml_escape }}",
                "summary": "{{ entry.content | strip_html | strip_newlines | truncatewords: 50 | xml_escape }}"
            }{% unless forloop.last %},{% endunless %}
        {% endfor %}]
}