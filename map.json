---
    layout: data
    permalink: /map.json
---
{
    "courses" : [{% for course in site.courses %}
            {
                "title: : "{{ course.title }}",
                "link" : "{{ course.permalink }}",
                "summary": "{{ course.summary }}",
                "image" : "{{ course.image }}"
            },
        {% endfor %}], 
    "modules" : [{% for module in site.modules %}
            {
                "title: : "{{ module.title }}",
                "summary": "{{ module.summary }}",{% for course in site.courses %}{% if course.slug == module.course %}
                "image" : "{{ course.image }}",
                "link" : "{{ course.permalink }}"
                {% endif %}{% endfor %}
            },{% endfor %}],
    "lessons" : [{% for lesson in site.lessons %}
            {
                "title: : "{{ lesson.title }}",
                "summary" : "{{ lesson.content | strip_html | strip_newlines | truncatewords: 50 | xml_escape }}",
                "link" : "{{ lesson.permalink }}",{% for course in site.courses %}{% if course.slug == lesson.course %}
                "image" : "{{ course.image }}",{% endif %}{% endfor %}
            },{% endfor %}]
    "events" : [{% for event in site.events %}
        {
            "title": "{{ event.title | xml_escape }}",
            "image" : "{{ event.image }}",
            "link": "{{ event.permalink | xml_escape }}",
            "summary": "{{ event.content | strip_html | strip_newlines | truncatewords: 50 | xml_escape }}"
        },
        {% endfor %}],    
    "pages" : [{% for entry in site.html_pages %}
            {
                "title": "{{ entry.title | xml_escape }}",
                "link": "{{ entry.url | xml_escape }}",
                "summary": "{{ entry.content | strip_html | strip_newlines | truncatewords: 50 | xml_escape }}",
                "image" : "{{ entry.ogImage }}"
            }{% unless forloop.last %},{% endunless %}
        {% endfor %}]
}